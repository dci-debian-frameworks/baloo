From 01f3fff52d63302e6970a088710ec6b692b1b470 Mon Sep 17 00:00:00 2001
From: Pino Toscano <pino@kde.org>
Date: Thu, 29 May 2014 08:55:00 +0200
Subject: [PATCH] xattr: fix fallback in no-xattr OSes

---
 src/file/lib/baloo_xattr_p.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/file/lib/baloo_xattr_p.h b/src/file/lib/baloo_xattr_p.h
index de7bb42..c323dfe 100644
--- a/src/file/lib/baloo_xattr_p.h
+++ b/src/file/lib/baloo_xattr_p.h
@@ -51,7 +51,7 @@ inline ssize_t baloo_getxattr(const QString& path, const QString& name, QString*
     const ssize_t size = getxattr(encodedPath, attributeName, NULL, 0, 0, 0);
 #elif defined(Q_OS_FREEBSD) || defined(Q_OS_NETBSD)
     const ssize_t size = extattr_get_file(encodedPath, EXTATTR_NAMESPACE_USER, attributeName, NULL, 0);
-#elif defined(Q_OS_WIN)
+#else
     const ssize_t size = 0;
 #endif
 
@@ -70,7 +70,7 @@ inline ssize_t baloo_getxattr(const QString& path, const QString& name, QString*
     const ssize_t r = getxattr(encodedPath, attributeName, data.data(), size, 0, 0);
 #elif defined(Q_OS_FREEBSD) || defined(Q_OS_NETBSD)
     const ssize_t r = extattr_get_file(encodedPath, EXTATTR_NAMESPACE_USER, attributeName, data.data(), size);
-#elif defined(Q_OS_WIN)
+#else
     const ssize_t r = 0;
 #endif
 
@@ -98,7 +98,7 @@ inline int baloo_setxattr(const QString& path, const QString& name, const QStrin
 #elif defined(Q_OS_FREEBSD) || defined(Q_OS_NETBSD)
     const ssize_t count = extattr_set_file(encodedPath, EXTATTR_NAMESPACE_USER, attributeName, attributeValue, valueSize);
     return count == -1 ? -1 : 0;
-#elif defined(Q_OS_WIN)
+#else
     return -1;
 #endif
 }
-- 
2.0.0

